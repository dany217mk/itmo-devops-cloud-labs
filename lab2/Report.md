# 2 –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è
## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è. 
1. –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú–ø–ª–æ—Ö–æ–π‚Äù Dockerfile, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –Ω–µ –º–µ–Ω–µ–µ —Ç—Ä–µ—Ö ‚Äúbad practices‚Äù –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–æ–≤
2. –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú—Ö–æ—Ä–æ—à–∏–π‚Äù Dockerfile, –≤ –∫–æ—Ç–æ—Ä–æ–º —ç—Ç–∏ –ø–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
3. –í Readme –æ–ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—É—é –∏–∑ –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤ –ø–ª–æ—Ö–æ–º –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–µ, –ø–æ—á–µ–º—É –æ–Ω–∞ –ø–ª–æ—Ö–∞—è –∏ –∫–∞–∫ –≤ —Ö–æ—Ä–æ—à–µ–º –æ–Ω–∞ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. –í Readme –æ–ø–∏—Å–∞—Ç—å 2 –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏. ! –ù–µ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–æ–≤, –∞ –æ —Ç–æ–º, –∫–∞–∫ –¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è —Ö–æ—Ä–æ—à–∏–π –¥–æ–∫–µ—Ä—Ñ–∞–π–ª –º–æ–∂–Ω–æ –Ω–∞–∫–æ—Å—è—á–∏—Ç—å –∏–º–µ–Ω–Ω–æ –≤ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.
## –•–æ–¥ —Ä–∞–±–æ—Ç—ã.
### 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
–û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
```
sudo apt update
sudo apt upgrade  
```
–°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
sudo apt install apt-transport-https ca-certificates curl software-properties-common
```
–î–æ–±–∞–≤–ª—è–µ–º GPG-–∫–ª—é—á –æ—Ç –¥–æ–∫–µ—Ä–∞
```
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
```
–î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker –≤ —Å–∏—Å—Ç–µ–º—É
```
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
```
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ docker —Ä–∞–±–æ—Ç–∞–µ—Ç
```
sudo systemctl status docker
```
![](assets/image.png)
–î–æ–∫–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∫–∞–π—Ñ–∞—Ä–∏–∫–∏, –º–æ–∂–Ω–æ –∏ –ø–æ –ø–∏–≤—É!
–ê —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏–º –¥–æ–∫–µ—Ä
```
sudo systemctl enable docker
sudo docker run hello-world
```
![](assets/image2.png)
–ú–ï–ì–ê –ö–ê–ô–§–ê–†–ò–ö–ò! –°–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ –ø–æ–∑–∞–¥–∏...

### 2. –°–æ–∑–¥–∞–µ–º –ø–ª–æ—Ö–æ–π dockerfile
![](assets/image3.jpg)
#### 2.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ latest:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ latest –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –æ–±—Ä–∞–∑–∞ –¥–µ–ª–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ–Ω–∞–¥–µ–∂–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è –æ–±—Ä–∞–∑–∞ –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å—Å—è –∏ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏.
#### 2.2 –ú–Ω–æ–∂–µ—Å—Ç–≤–æ RUN –∫–æ–º–∞–Ω–¥:
–∫–∞–∂–¥–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ RUN —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Å–ª–æ–π –≤ –æ–±—Ä–∞–∑–µ, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ –∏ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏.
#### 2.3 –ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ root:
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø–æ–¥ root, —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∏—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω, –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ.
#### 2.4 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ apt-get –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞
–í RUN apt-get install -y –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è –∫–µ—à apt, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞, —Ç–∞–∫ –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
#### 2.5 –ù–µ—Å–æ–±–ª—é–¥–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤
–î–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–µ–ª–∞—Ç—å –æ—Ç—Å—Ç–ø—É–ø—ã.

### 3. –°–æ–∑–¥–∞–µ–º —Ö–æ—Ä–æ—à–∏–π dockerfile
![](assets/image4.jpg)
#### 3.1 –°—Ç–∞–≤–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é ubuntu. 
```
FROM ubuntu:20.04
```
#### 3.2 –û–±—å–µ–¥–∏–Ω—è–µ–º –≤—Å–µ RUN –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω—É, —É–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª-–≤–æ —Å–ª–æ–µ–≤ –∏ —É–ª—É—à–∞–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```
RUN apt-get update && apt-get install -y curl git && rm -rf /var/lib/apt/lists/*
```
#### 3.3 –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π —Å –ø–æ–º–æ—â—å—é useradd –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –Ω–µ–≥–æ —á–µ—Ä–µ–∑ USER. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```
RUN useradd -m myuser
USER myuser
```
#### 3.4 –û—á–∏—â–∞–µ–º –∫–µ—à apt
```
.&& rm -rf /var/lib/apt/lists/*
```
#### 3.5 –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞

### 4. –ß—Ç–æ —Ç–∞–º –ø–æ –ø–ª–æ—Ö–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏?
#### 4.1 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU –∏ –ø–∞–º—è—Ç–∏) –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Ö–æ—Å—Ç–∞. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–ª–∏ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏), —ç—Ç–æ –º–æ–∂–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏–ª–∏ –¥–∞–∂–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–∞–≤–∏—Å–∞–Ω–∏—é –∏–ª–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞. üíÄüíÄüíÄ
```
docker run my-container
```
![](assets/meme1.png)
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–π –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É, —á—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—ã.

–í—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å –ø–æ–º–æ—â—å—é –æ–ø—Ü–∏–π --memory –∏ --cpus.
```
docker run --memory="512m" --cpus="1" mega-crutoi-container
```
–≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ 512 –º–± –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏ 1 –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ —è–¥—Ä–∞, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –¥–∞–µ—Ç –∫–æ–º–ø—É –∂–∏—Ç—å.

#### 4.2 –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞–Ω–Ω—ã–µ, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–¥–∞–ª–µ–Ω –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ–Ω–∞–¥–µ–∂–Ω—ã–º–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–æ–≤ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π).

–ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Ç–æ–º–æ–≤:
```
docker run my-container-db
```
–í—Å–µ –¥–∞–Ω–Ω—ã–µ, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ –µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –æ–ø–∞—Å–Ω–æ.

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Volumes –∏–ª–∏ Bind Mounts –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –Ω–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.